%%% syllabus_template.tex
%%% Pandoc template using LaTeX article class
%%% For creating PDF from .md file with YAML frontmatter 
%%% Created by Eric M. Fink (https://github.com/EricMFink/pandoc-templates)

% ====================
% = Layout & Spacing =
% ====================

\documentclass[11pt,letterpaper,twoside]{article}
\usepackage[hmarginratio=1:1,top=1in,bottom=.75in,left=1.5in,right=1.5in]{geometry}

\usepackage{etoolbox}
\usepackage{marginnote}
\usepackage{sidenotes}

\usepackage{needspace}
\usepackage[defaultlines=3,all]{nowidow}
\raggedbottom
\usepackage{ragged2e}
\setlength{\RaggedRightParindent}{0em}
\RaggedRight
\usepackage[singlespacing]{setspace}
\usepackage[none]{hyphenat}
\usepackage{parskip}
\setlength{\parindent}{0em}
\setlength{\parskip}{0.6em plus 0.2em minus 0.1em}
\setlength{\emergencystretch}{3em}  % prevent overfull lines

% ==========================
% = Language & Date Format =
% ==========================

\usepackage[english]{babel}  
\usepackage{datetime}
\newdateformat{mydate}{\THEDAY-\monthname-\THEYEAR}
\usepackage{currfile}

% ==================
% = Colors & Fonts =
% ==================

\usepackage[table]{xcolor}
\definecolor{OffBlack}{HTML}{191919}
\definecolor{Maroon}{HTML}{800000}
\definecolor{TarHeelBlue}{HTML}{4b9cd3}
\definecolor{HopkinsBlue}{HTML}{002D72}
\definecolor{RacingGreen}{HTML}{004225}

\usepackage{fontspec}
\setmainfont{Athelas}[Mapping=tex-text]
\setsansfont{Adelle Sans}[Mapping=tex-text]
\setmonofont[Scale=0.90]{LFT Etica Mono}

\usepackage{textcomp}
\usepackage{amssymb}}
\usepackage[]{ccicons}
\usepackage{fontawesome5}

% =======================
% = Headers and Footers = 
% =======================

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyfoot{}
\fancyfoot[C]{}
\fancyfoot[R]{\tiny\texttt{$path$ Revised: \mydate\today}}
\fancyfoot[L]{}
\fancyhead[CE]{\textsc{$subject$}}
\fancyhead[CO]{\textsc{$institution$}}
\fancyhead[LE]{\textsc{\thepage}}
\fancyhead[LO]{\textsc{$term$}}
\fancyhead[RE]{\textsc{Prof. Fink}}
\fancyhead[RO]{\textsc{\thepage}}

% =========
% = Lists =
% =========

\usepackage{enumitem}
\setlistdepth{6}
\setlist[itemize]{leftmargin={1.5em}}
\providecommand{\tightlist}{%
\setlength{\itemsep}{0em}\setlength{\parskip}{0em}\setlength{\itemindent}{0em}}

% ============
% = Headings =
% ============

\usepackage[compact]{titlesec}
% \titlespacing*{<command>}{<left>}{<before-sep>}{<after-sep>}
\titlespacing*{\section}{0em}{0em}{.5em}
\titlespacing*{\subsection}{0em}{2em}{.5em}
\titlespacing*{\subsubsection}{0em}{1.5em}{.5em}
\titlespacing*{\paragraph}{0em}{1em}{0em}
\titlespacing*{\subparagraph}{0em}{.2em}{0em}

\setcounter{secnumdepth}{0}

% H1
\titleformat{\section}[block]
  {\huge\sffamily\color{Maroon}}
  {}
  {0em}
  {}

% H2
\titleformat{\subsection}[block]
  {\needspace{9\baselineskip}\LARGE\sffamily\color{Maroon}}
  {}
  {0em}
  {}
% H3
\titleformat{\subsubsection}[block]
  {\needspace{6\baselineskip}\Large\rmfamily\bfseries}
  {\thesubsection}
  {0em}
  {}
% H4
\titleformat{\paragraph}[block]
  {\footnotesize\sffamily\large\rmfamily\bfseries}
  {\thesubsubsection}
  {0em}
  {}
% H5
\titleformat{\subparagraph}[block]
  {\footnotesize\rmfamily}
  {}
  {0em}
  {}

% ==========
% = Quotes =
% ==========

\usepackage{csquotes}

\AtBeginEnvironment{quote}{\footnotesize\itshape} 

\renewenvironment{quote}{%
   \list{}{%
     \leftmargin2em   % this is the adjusting screw
     \rightmargin\leftmargin\parsep .1em }
   \item\relax
}
{\endlist}

% ==========
% = Tables =
% ==========

\usepackage{longtable,booktabs,array}
%\setlength\heavyrulewidth{0pt}
\usepackage{multirow}
\usepackage{calc}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\renewcommand{\arraystretch}{1.5}
\AtBeginEnvironment{longtable}{\footnotesize}

% =============
% = Footnotes = 
% =============

\usepackage[hang,flushmargin]{footmisc} 
$if(notesymbols)$\renewcommand{\thefootnote}{\fnsymbol{footnote}}$endif$

% ==============
% = Hyperlinks =
% ==============

\usepackage[unicode=true]{hyperref}
\hypersetup{%
  colorlinks=true,
  allcolors=HopkinsBlue,
  breaklinks=true,
  pdfusetitle=true,
  pdfauthor={$author$},
  pdftitle={$title$},
  $if(subject)$
  pdfsubject={$subject$},
  $endif$
  $if(keywords)$
  pdfkeywords={$for(keywords)$$keywords$$sep$, $endfor$},
  $endif$
  pdfproducer=LateX via pandoc,
  pdfcreator=LateX via pandoc
}

% ===============================
% ===== BEGIN DOCUMENT ==========
% ===============================

\begin{document}\thispagestyle{empty}

\color{OffBlack}

\section{$subject$}

\begin{footnotesize}
\subparagraph{$institution$}
\subparagraph{$term$}
$if(room)$\subparagraph{$room$}$endif$
$if(meets)$\subparagraph{$meets$}$endif$
\subparagraph{\url{$repo-url$}}
\vspace{1em}

$if(ta)$\paragraph{Professor}$endif$
\subparagraph{Eric M. Fink} 
\subparagraph{efink@elon.edu}
\subparagraph{336.279.9334} 
\subparagraph{Office Hours: {\url{calendly.com/emfink/}}}

\vspace{1em}

$if(ta2)$
\paragraph{Teaching Assistants:}
\subparagraph{$ta$}
\subparagraph{$ta-email$}
\vspace{.5em}
\subparagraph{$ta2$}
\subparagraph{$ta2-email$}
$elseif(ta)$
\subparagraph{Teaching Assistant:}
\subparagraph{$ta$}
\subparagraph{$ta-email$}
$endif$
\end{footnotesize}

\vspace{1em}

\needspace{1\baselineskip}

$body$

\end{document}
